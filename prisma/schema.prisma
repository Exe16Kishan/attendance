generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "sqlite"
}

model User {
  id       Int    @id @default(autoincrement())
  name     String
  email    String @unique
  password String

  teacher     Class[]      @relation("teacher")
  students    Class[]      @relation("student")
  attendances Attendance[]
}

model Class {
  id          Int          @id @default(autoincrement())
  classname   String
  teachername User         @relation("teacher", references: [id], fields: [teacherId])
  teacherId   Int
  students    User[]       @relation("student")
  attendances Attendance[]
}

model Attendance {
  id        Int    @id @default(autoincrement())
  class     Class  @relation(fields: [classId], references: [id])
  classId   Int
  student   User   @relation(fields: [studentId], references: [id])
  studentId Int
  status    Status
  @@unique([classId,studentId])
}

enum Role {
  USER
  TEACHER
}

enum Status {
  PRESENT
  ABSENT
}
